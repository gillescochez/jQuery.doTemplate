/*! github.com/gillescochez/jQuery.doTemplate */
(function($){var doTemplate=function(a){var b=this;return b.source=a.source,b.data=a.data,b.source?b.compiler=$.doTemplate.engine(b.source):b.items=null,b.data&&b.compiler&&b.compile(),b.$dom=undefined,b};doTemplate.prototype={compile:function(a){this.compiler||(this.compiler=$.doTemplate.engine(this.source));var b=[],c=this.source,d=this.compiler,e=function(a){b.push({data:a,source:c,compiler:d,compiled:d(a)})},f=0,g=0;a=a||this.data||null;if(a){if(a.constructor==Array)for(g=a.length;f<g;f++)e(a[f]);else e(a);this.items=b,this.$dom=null}return this},toDom:function(){var a=document.createDocumentFragment();return $.each(this.items,function(b,c){$($(c.compiled).get()||document.createTextNode(c.compiled)).data("doTemplate",c).each(function(){a.appendChild(this)})}),this.$dom=$(a),this},render:function(a,b,c){return this.$dom||this.toDom(),$(a)[b](c?this.$dom.clone(!0):this.$dom),this}},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replace:"replaceWith"},function(a,b){doTemplate.prototype[a]=function(a,c){return this.render(a,b,c)}}),$.doTemplate=function(a,b){var c={},d;if(a.jquery||a.nodeType)d=$.doTemplate._(a),c={source:d.source,data:d.data};return typeof a=="string"&&(b&&(b.jquery||b.nodeType)?(d=$.doTemplate._(b),c={source:a,data:d.data}):c={source:a,data:b}),!c&&a.constructor==Object&&(settings=a),new doTemplate(c)},$.doTemplate._=function(a){var b;a.jquery&&(a=a[0]);while(a&&(a.nodeType===1||a.nodeType===3)&&!(b=$.data(a,"doTemplate"))&&(a=a.parentNode));return b||null},function(){function encodeHTMLSource(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!\\w+;)|<|>|"|'|\//g;return function(c){return c?c.toString().replace(b,function(b){return a[b]||b}):c}}function resolveDefs(c,block,def){return(typeof block=="string"?block:block.toString()).replace(c.define||skip,function(m,code,assign,value){return code.indexOf("def.")===0&&(code=code.substring(4)),code in def||(assign===":"?def[code]=value:eval("def['"+code+"']="+value)),""}).replace(c.use||skip,function(m,code){var v=eval(code);return v?resolveDefs(c,v,def):v})}function unescape(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var doT={version:"0.2.0",templateSettings:{shorttag:/\$\{([^\}]*)\}/g,evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:null,strip:!0,append:!0,selfcontained:!1},template:undefined},global=function(){return this||eval("this")}(),startend={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},skip=/$^/;doT.template=function(a,b,c){b=b||doT.templateSettings;var d=b.append?startend.append:startend.split,e,f,g=0,h;if(b.use||b.define){var i=global.def;global.def=c||{},e=resolveDefs(b,a,global.def),global.def=i}else e=a;e=("var out='"+(b.strip?e.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):e).replace(/'|\\/g,"\\$&").replace(b.shorttag||skip,"{{=$1}}").replace(b.interpolate||skip,function(a,b){return d.start+unescape(b)+d.end}).replace(b.encode||skip,function(a,b){return f=!0,d.startencode+unescape(b)+d.end}).replace(b.conditional||skip,function(a,b,c){return b?c?"';}else if("+unescape(c)+"){out+='":"';}else{out+='":c?"';if("+unescape(c)+"){out+='":"';}out+='"}).replace(b.iterate||skip,function(a,b,c,d){return b?(g+=1,h=d||"i"+g,b=unescape(b),"';var arr"+g+"="+b+";if(arr"+g+"){var "+h+"=-1,l"+g+"=arr"+g+".length-1;while("+h+"<l"+g+"){"+c+"=arr"+g+"["+h+"+=1];out+='"):"';} } out+='"}).replace(b.evaluate||skip,function(a,b){return"';"+unescape(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|}|^|{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|}|^|{)out\+=''\+/g,"$1out+="),f&&b.selfcontained&&(e="var encodeHTML=("+encodeHTMLSource.toString()+"());"+e);try{return b.varname?new Function(b.varname,e):new Function("this.$=jQuery;$.extend(this,arguments[0]);"+e)}catch(j){throw typeof console!="undefined"&&console.log("Could not create a template function: "+e),j}},$.doTemplate.engine=doT.template,$.doTemplate.engine.settings=doT.templateSettings}(),$.fn.doTemplate=function(a,b){return a.jquery||a.nodeType?(a.jquery&&(a=a[0]),$.doTemplate({source:$(this).html(),data:$.doTemplate._(a).data})):$.doTemplate({source:$(this).html(),data:a})}})(jQuery)