/*! github.com/gillescochez/jQuery.doTemplate */
(function($){$.doTemplate=function(){var a=function(a){return this.source=a.source,this.data=a.data,this.source&&(this.compiler=$.doTemplate.engine(this.source)),this.data?this.compile(a.data):this.compiled=null,this},b=function(a){return a.constructor==String};return $.extend(a.prototype,{compile:function(a){var b=document.createDocumentFragment(),c=document.createElement("div"),d=this.compiler||$.doTemplate.engine(this.source),e,f,g=function(a,c){e=d(c),f=$(e),f[0]||(f=$(document.createTextNode(e))),f.data("doTemplate",{source:this.source,data:c}).each(function(){b.appendChild(this)})};return a=a||this.data||null,a?(a.constructor!=Array&&(a=[a]),$.each(a,g),this.compiled=$(b),this):this},appendTo:function(a){return this.render(a,"append")},prependTo:function(a){return this.render(a,"prepend")},insertBefore:function(a){return this.render(a,"before")},insertAfter:function(a){return this.render(a,"after")},replace:function(a){return this.render(a,"replaceWith")},render:function(a,b){return $(a)[b](this.compiled.clone(!0)),this}}),function(){var c=arguments,d,e;if(c.length===1){if(c[0].jquery||c[0].nodeType)d=$.doTemplate._(c[0]),e={source:d.source,data:d.data};b(c[0])&&(e={source:c[0]}),!e&&c[0].constructor==Object&&(e=c[0])}return c.length===2&&b(c[0])&&(c[1].jquery||c[1].nodeType?(d=$.doTemplate._(c[1]),e={source:c[0],data:d.data}):e={source:c[0],data:c[1]}),new a(e||{})}}(),$.doTemplate._=function(a){var b;a.jquery&&(a=a[0]);while(a&&a.nodeType===1&&!(b=$.data(a,"doTemplate"))&&(a=a.parentNode));return b||null},function(){function encodeHTMLSource(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!\\w+;)|<|>|\"|'|\//g;return function(c){return c?c.toString().replace(b,function(b){return a[b]||b}):c}}function resolveDefs(c,block,def){return(typeof block=="string"?block:block.toString()).replace(c.define?/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g:skip,function(m,code,assign,value){return code.indexOf("def.")===0&&(code=code.substring(4)),code in def||(assign===":"?def[code]=value:eval("def['"+code+"']="+value)),""}).replace(c.use?/\{\{#([\s\S]+?)\}\}/g:skip,function(m,code){var v=eval(code);return v?resolveDefs(c,v,def):v})}function unescape(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var doT={version:"0.2.0",templateSettings:{evaluate:!0,interpolate:!0,encode:!0,use:!0,define:!0,conditional:!0,iterate:!0,shorttag:!0,strip:!0,append:!0,selfcontained:!1,varname:!1},template:undefined},global=function(){return this||eval("this")}(),startend={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},skip=/$^/;global.encodeHTML=encodeHTMLSource(),doT.template=function(a,b,c){b=b||doT.templateSettings;var d=b.append?startend.append:startend.split,e,f,g,h,i=0;b.use||b.define?(h=global.def,global.def=c||{},e=resolveDefs(b,a,global.def),global.def=h):e=a,e=("var out='"+(b.strip?e.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]|(\/\*[\s\S]*?\*\/)/g,""):e).replace(/'|\\/g,"\\$&").replace(b.shorttag?/\$\{([^\}]*)\}/g:skip,"{{=$1}}").replace(b.interpolate?/\{\{=([\s\S]+?)\}\}/g:skip,function(a,b){return d.start+unescape(b)+d.end}).replace(b.encode?/\{\{!([\s\S]+?)\}\}/g:skip,function(a,b){return f=!0,d.startencode+unescape(b)+d.end}).replace(b.conditional?/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g:skip,function(a,b,c){return b?c?"';}else if("+unescape(c)+"){out+='":"';}else{out+='":c?"';if("+unescape(c)+"){out+='":"';}out+='"}).replace(b.iterate?/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g:skip,function(a,b,c,d){return b?(i+=1,g=d||"i"+i,b=unescape(b),"';var arr"+i+"="+b+";if(arr"+i+"){var "+g+"=-1,l"+i+"=arr"+i+".length-1;while("+g+"<l"+i+"){"+c+"=arr"+i+"["+g+"+=1];out+='"):"'} };out+='"}).replace(b.evaluate?/\{\{([\s\S]+?)\}\}/g:skip,function(a,b){return"';"+unescape(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").split("out+='';").join("").split("var out='';out+=").join("var out="),f&&b.selfcontained&&(e="var encodeHTML=("+encodeHTMLSource.toString()+"());"+e);try{return b.varname?new Function(b.varname,e):new Function("this.$=jQuery;$.extend(this,arguments[0]);"+e)}catch(j){throw window.console&&console.log("Could not create a template function: "+e),j}},$.doTemplate.engine=doT.template,$.doTemplate.engine.settings=doT.templateSettings}(),$.fn.doTemplate=function(a,b){return a.jquery||a.nodeType?(a.jquery&&(a=a[0]),$.doTemplate({source:$(this).html(),data:$.doTemplate._(a).data})):$.doTemplate({source:$(this).html(),data:a})}})(jQuery)